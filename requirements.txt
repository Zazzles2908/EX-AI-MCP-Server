# ============================================================================
# CORE MCP AND API DEPENDENCIES
# ============================================================================
mcp>=1.20.0
openai>=1.55.2
pydantic>=2.0.0
python-dotenv>=1.0.0
# DEPENDENCY FIX (2025-11-04): Switched from zhipuai to zai-sdk to resolve PyJWT conflict
# zhipuai requires PyJWT<2.9.0, but MCP 1.20.0 requires PyJWT>=2.10.1
# zai-sdk requires PyJWT>=2.8.0, which is COMPATIBLE with MCP 1.20.0
# zai-sdk is the official Z.ai SDK with better features (higher file limits, longer retention)
zai-sdk>=0.0.4  # Official Z.ai SDK - compatible with MCP 1.20.0

# File management system dependencies (2025-11-04)
asyncpg>=0.29.0  # PostgreSQL async driver for file management audit system
importlib-resources>=5.0.0; python_version<"3.9"
tiktoken>=0.5.0  # Token counting for context engineering

# ============================================================================
# WEBSOCKET DAEMON DEPENDENCIES
# ============================================================================
# websockets 14.2 - REQUIRED by Supabase realtime package
# CRITICAL: Supabase realtime 2.4.x requires websockets<15
# Cannot upgrade to 15.x until Supabase updates their dependency
# This is a hard dependency constraint, not a preference
websockets==14.2

# ============================================================================
# SUPABASE DEPENDENCIES (Track 3: Persistent Storage)
# ============================================================================
# Version 2.15.3: Stable version compatible with httpx 0.27.x
# - Pre-dates http_client parameter issues (< 2.20.0)
# - Compatible with MCP server httpx requirements (>=0.27.1)
# - Production-ready and well-tested
httpx==0.27.2  # Required for MCP 1.16.0 and supabase compatibility
supabase==2.15.3

# ============================================================================
# REDIS DEPENDENCIES (Dual Storage: Redis + Supabase)
# ============================================================================
redis>=5.0.0  # Redis client for conversation caching and persistence

# ============================================================================
# CACHING DEPENDENCIES (Routing Cache + Conversation Cache)
# ============================================================================
cachetools>=5.0.0  # TTL cache for routing decisions and in-memory caching

# ============================================================================
# LOGGING DEPENDENCIES (Structured Logging Infrastructure)
# ============================================================================
structlog>=24.1.0  # Structured logging with context enrichment and async support

# ============================================================================
# TIMEZONE DEPENDENCIES (Melbourne/Australia AEDT timezone support)
# ============================================================================
pytz>=2024.1  # Timezone conversion for Australia/Melbourne (AEDT) timestamps

# ============================================================================
# MONITORING DEPENDENCIES (Phase 3 Critical Gaps - 2025-10-18)
# ============================================================================
prometheus-client>=0.20.0  # Prometheus metrics collection and export
psutil>=5.9.0  # System and process monitoring (CPU, memory, disk)
aiohttp>=3.9.0  # HTTP server for health checks and metrics

# ============================================================================
# RESILIENCE DEPENDENCIES (Phase 1 Critical Fixes - 2025-10-18)
# ============================================================================
pybreaker>=1.0.0  # Circuit breaker pattern for external service calls

# ============================================================================
# SECURITY DEPENDENCIES (Batch 4.3 - 2025-11-02)
# ============================================================================
PyJWT>=2.8.0  # JWT authentication for WebSocket connections

# ============================================================================
# PERFORMANCE DEPENDENCIES (Phase 2 - 2025-10-28, Updated 2025-10-29)
# ============================================================================
xxhash>=3.0.0  # Fast hashing for message deduplication in resilient_websocket.py
aiofiles>=23.2.0  # Async file operations to prevent event loop blocking

# ============================================================================
# ADAPTIVE TIMEOUT DEPENDENCIES (Day 0 - 2025-11-03)
# ============================================================================
numpy>=1.24.0  # Statistical calculations for adaptive timeout engine (P95, percentiles)

# ============================================================================
# CODE QUALITY DEPENDENCIES (2025-10-20, Updated 2025-10-27)
# ============================================================================
pyflakes>=3.0.0  # Static code analysis for finding bugs and code quality issues
ruff>=0.1.0  # Fast Python linter and formatter (replaces flake8, isort, black)
black>=23.0.0  # Code formatter for consistent style
isort>=5.12.0  # Import statement organizer
pytest>=7.4.0  # Testing framework
pytest-asyncio>=0.21.0  # Async test support for pytest