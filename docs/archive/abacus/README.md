# Deepagent Configuration for EX-AI MCP Server

This directory contains the configuration files and documentation for integrating deepagent from Abacus.ai with the EX-AI MCP Server project.

## Files

- `deepagent.config.json` - Main configuration file (generated by setup script)
- `deepagent_configuration_guide.md` - Comprehensive setup guide
- `mcp_capabilities_mapping.md` - MCP tools integration mapping
- `abacus_review.md` - Code review findings
- `implementation_checklist.md` - Implementation checklist
- `setup_deepagent.py` - Setup script
- `.env.template` - Environment variables template (generated by setup script)
- `README.md` - This file

## Quick Start

1. Run the setup script to generate configuration files:
   ```bash
   python docs/abacus/setup_deepagent.py
   ```

2. Copy `.env.template` to `.env` and fill in your API keys:
   ```bash
   cp docs/abacus/.env.template docs/abacus/.env
   # Edit .env with your actual API keys
   ```

3. Configure deepagent with the generated `deepagent.config.json`

4. Follow the detailed guide in `deepagent_configuration_guide.md`

## Directory Structure

```
docs/abacus/
├── deepagent.config.json          # Main configuration (generated)
├── deepagent_configuration_guide.md
├── mcp_capabilities_mapping.md
├── abacus_review.md
├── implementation_checklist.md
├── setup_deepagent.py
├── .env.template                  # Environment template (generated)
├── README.md
├── reports/                       # Generated reports (created by setup)
├── logs/                         # Deepagent logs (created by setup)
└── templates/                    # Configuration templates (created by setup)
```

## MCP Tools Integration

The configuration includes full integration with all available MCP tools:

### Core Analysis Tools
- `mcp_chat` - General chat and collaborative thinking
- `mcp_thinkdeep` - Comprehensive investigation and reasoning
- `mcp_analyze` - Code analysis workflow
- `mcp_codereview` - Code review workflow
- `mcp_debug` - Debug and root cause analysis

### Specialized Workflow Tools
- `mcp_precommit` - Pre-commit validation workflow
- `mcp_secaudit` - Security audit workflow
- `mcp_docgen` - Documentation generation
- `mcp_refactor` - Refactoring analysis
- `mcp_tracer` - Code tracing workflow
- `mcp_testgen` - Test generation

### Collaboration Tools
- `mcp_planner` - Interactive sequential planner
- `mcp_consensus` - Multi-model consensus workflow
- `mcp_challenge` - Critical analysis tool

## Configuration Features

### Automated Workflows
- **Daily Analysis**: Comprehensive code analysis every morning
- **Pre-commit Validation**: Automatic validation before commits
- **Issue Investigation**: On-demand debugging and analysis

### Security Integration
- OWASP Top 10 compliance checking
- Automated security audits
- Vulnerability scanning
- Compliance reporting

### Performance Monitoring
- Response time tracking
- Success rate monitoring
- Quality metrics
- Alert system

### Model Selection
- Primary model: `glm-4.5-flash`
- Fallback model: `kimi-latest`
- High complexity: `kimi-k2-turbo-preview`
- Multi-model consensus support

## Environment Variables

Required environment variables (see `.env.template`):

```bash
# Abacus.ai Configuration
ABACUS_API_KEY=your_abacus_api_key_here
ABACUS_PROJECT_ID=your_project_id_here
DEEPAGENT_WORKSPACE=ex-ai-mcp-server

# MCP Server Configuration
MOONSHOT_API_KEY=your_moonshot_key_here
GLM_API_KEY=your_glm_key_here

# Optional providers
OPENROUTER_API_KEY=your_openrouter_key_here
CUSTOM_API_URL=http://localhost:11434
```

## Usage Examples

### Running Daily Analysis
```python
# Deepagent will automatically run daily analysis at 9 AM
# Or trigger manually through Abacus.ai interface
```

### Pre-commit Validation
```bash
# Configure git hooks to trigger deepagent pre-commit validation
# This will run mcp_precommit and mcp_secaudit tools
```

### Issue Investigation
```python
# Use deepagent to investigate issues using:
# - mcp_debug for root cause analysis
# - mcp_thinkdeep for comprehensive investigation
# - mcp_planner for solution planning
```

## Troubleshooting

### Common Issues

1. **API Key Issues**
   - Ensure all required API keys are set in `.env`
   - Verify API keys are valid and have necessary permissions

2. **Configuration Errors**
   - Run the setup script again to regenerate configuration
   - Check the configuration guide for detailed setup instructions

3. **MCP Tool Failures**
   - Check the MCP capabilities mapping document
   - Verify MCP server is running and accessible

4. **Performance Issues**
   - Adjust thinking modes in configuration
   - Modify timeout settings
   - Check model availability

### Getting Help

1. **Documentation**: Review all markdown files in this directory
2. **Configuration Guide**: `deepagent_configuration_guide.md`
3. **MCP Mapping**: `mcp_capabilities_mapping.md`
4. **Implementation**: `implementation_checklist.md`
5. **Abacus.ai Support**: Contact Abacus.ai technical support

## Updates and Maintenance

### When to Update Configuration

- New MCP tools are added to the server
- Project structure changes significantly
- Security requirements change
- Performance requirements change
- New Abacus.ai features become available

### Update Process

1. Review changes in the main project
2. Update configuration files as needed
3. Test configuration with deepagent
4. Update documentation
5. Commit changes

## Support and Resources

- **Abacus.ai Documentation**: [Official Abacus.ai docs]
- **Deepagent API Reference**: [Deepagent API documentation]
- **MCP Protocol**: [Model Context Protocol specification]
- **Community Support**: [Abacus.ai community forums]
- **Technical Support**: [Abacus.ai technical support]

## Contributing

When contributing to deepagent configuration:

1. Follow the existing configuration patterns
2. Update documentation when making changes
3. Test configuration thoroughly
4. Update the implementation checklist
5. Consider security implications

## License

This configuration is part of the EX-AI MCP Server project and follows the same license terms.