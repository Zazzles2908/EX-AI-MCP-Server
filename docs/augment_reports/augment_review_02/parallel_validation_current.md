# Parallel validation snapshot (EXAI + local)

This report was generated by running two analyses in parallel: (1) EXAI MCP diagnostic artifact, and (2) local log inspection of MCP stdio logging.

## 1) EXAI MCP diagnostic artifact (raw)

```markdown
CONTENT FROM EXAI TOOL CALL FOLLOWS

```json
{
  "MCP-ENVELOPE": {
    "req_id": "550e8400-e29b-41d4-a716-446655440000",
    "model": "unknown",
    "provider": "unknown",
    "tool_name": "mcp_server",
    "sent_prompt_preview": "Produce a RAW diagnostic artifact to embed in a repo markdown report. Requirements: - Output two clearly labeled sections: (1) MCP-ENVELOPE (simulated) in JSON with keys: req_id (uuid4), model, provider, tool_name, sent_prompt_preview (first 200 chars), token_estimate, timings, and content_preview (first 200 chars of model content) (2) RAW-CONTENT verbatim text block starting with line: \"RAW START >>>\" and ending with \"<<< RAW END\".",
    "token_estimate": 3421,
    "timings": {
      "start_time": "2024-06-18T14:23:45Z",
      "end_time": "2024-06-18T14:23:47Z",
      "duration_ms": 2100
    },
    "content_preview": "This diagnostic artifact was generated as part of a parallel validation process. The RAW-CONTENT section contains unique identifiers and validation data for tracking purposes across multiple validation runs."
  }
}

RAW START >>>[AB7C2D9] 834921

This diagnostic artifact represents a snapshot of the validation process at the current timestamp. The unique token and random number combination ensures traceability and prevents duplicate entries during parallel validation runs.

The validation process includes comprehensive checks of system components, configuration parameters, and operational metrics. All data points are captured with precise timestamps to support detailed analysis and troubleshooting if anomalies are detected during the validation cycle.
<<< RAW END
```

END OF EXAI CONTENT
```

## 2) Local MCP stdio logging snapshot

- toolcalls.jsonl (first 100 lines): shows recent provider activity (mostly kimi file_upload_extract). Sample:

```jsonl
{"provider": "kimi", "tool_name": "file_upload_extract", "args": {"path": "C:\\Project\\EX-AI-MCP-Server\\server.py", "purpose": "file-extract"}, "start_ts": 1757200863.3202353, "end_ts": 1757200865.558801, "latency_ms": 2238.565683364868, "citations": [], "ok": true, "error": null}
{"provider": "kimi", "tool_name": "file_upload_extract", "args": {"path": "C:\\Project\\EX-AI-MCP-Server\\tools\\consensus.py", "purpose": "file-extract"}, "start_ts": 1757200865.5595305, "end_ts": 1757200866.6532052, "latency_ms": 1093.674659729004, "citations": [], "ok": true, "error": null}
...
```

- toolcalls_raw.jsonl: currently empty (0 effective lines).

- router.jsonl: currently empty (0 effective lines).

### Interpretation
- The raw mirror is enabled by env but only populated on stdio MCP tool-call path in server.py. Our recent validation used WS client (SmartChat), which does not pass through the stdio hook. Hence toolcalls_raw.jsonl is empty.
- Router decision envelopes are also unexercised; we need to trigger a router-managed job to populate router.jsonl.

## 3) Minimal plan to conclusively validate raw logging

1. Ensure daemon is running (non-blocking): `scripts/ws_start.ps1`
2. Trigger stdio MCP path with raw ON:
   - PowerShell: `$env:EXAI_TOOLCALL_LOG_RAW_FULL="true"; python scripts/mcp_server_wrapper.py`
   - Expect: `.logs/toolcalls_raw.jsonl` gains a new entry with `raw` body; no system prompt should be present.
3. Trigger stdio MCP path with raw OFF:
   - PowerShell: `$env:EXAI_TOOLCALL_LOG_RAW_FULL="false"; python scripts/mcp_server_wrapper.py`
   - Expect: `.logs/toolcalls_raw.jsonl` stays unchanged; summaries still land in `.logs/toolcalls.jsonl`.
4. Force router decision logging:
   - Run a router-managed Kimi flow (large file summarization + CSV extraction) so `.logs/router.jsonl` records `route_start`, `decision`, `attempt`, and `result_meta` with correlation IDs.
5. Append 4â€“6 samples into `docs/augment_reports/augment_review_02/router_provider_mcp_samples.md` showing correlations across the three streams.

## 4) Status
- EXAI raw artifact saved above for cross-checking.
- Local logs confirm summaries are flowing; raw mirror and router streams pending exercise via stdio + router-managed flows.


