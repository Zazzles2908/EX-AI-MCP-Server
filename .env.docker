# ==============================================================================
# EX-AI MCP Server Docker Environment Configuration
# ==============================================================================
# Critical timeout configuration for daemon startup
# These timeouts must maintain the ratio: daemon >= 1.5x tool >= 1.5x workflow

# Tool timeouts (base timeouts for all operations)
# WORKFLOW_TOOL_TIMEOUT_SECS: Base timeout for workflow operations (45-180s)
# TOOL_TIMEOUT_SECS: Maximum timeout for any tool operation
# DAEMON_TIMEOUT_SECS: Daemon process timeout (must be >= 1.5x TOOL_TIMEOUT_SECS)
WORKFLOW_TOOL_TIMEOUT_SECS=180
TOOL_TIMEOUT_SECS=180
DAEMON_TIMEOUT_SECS=270

# WebSocket configuration
EXAI_WS_HOST=0.0.0.0
EXAI_WS_PORT=8079
EXAI_WS_MAX_MSG_BYTES=33554432
EXAI_WS_CLOSE_TIMEOUT=1.0
EXAI_WS_RESULT_TTL=600
EXAI_WS_DAEMON_TIMEOUT=300

# Provider timeouts
GLM_TIMEOUT_SECS=120
GLM_WEBSEARCH_TIMEOUT_SECS=30
KIMI_TIMEOUT_SECS=180

# Provider model configurations
GLM_DEFAULT_MODEL=glm-4.5-flash
GLM_QUALITY_MODEL=glm-4.6
GLM_SPEED_MODEL=glm-4.5-flash
GLM_THINKING_MODEL=glm-4.6
KIMI_DEFAULT_MODEL=kimi-k2-0905-preview
KIMI_QUALITY_MODEL=kimi-k2-0905-preview
KIMI_SPEED_MODEL=kimi-k2-turbo-preview
KIMI_THINKING_MODEL=kimi-thinking-preview

# Provider inflight limits
EXAI_WS_GLM_MAX_INFLIGHT=4
EXAI_WS_KIMI_MAX_INFLIGHT=6

# Web search configuration
GLM_WEBSEARCH_COUNT=10
GLM_ENABLE_WEB_BROWSING=true

# Circuit breaker configuration
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_SECS=60
FALLBACK_TO_WEBSOCKET=true

# MiniMax M2 Router Configuration
# Added for intelligent routing between GLM, Kimi, and MiniMax
MINIMAX_ENABLED=true
MINIMAX_M2_KEY=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJHcm91cE5hbWUiOiJKYXplZWwgQWppcmVlbiIsIlVzZXJOYW1lIjoiSmF6ZWVsIEFqaXJlZW4iLCJBY2NvdW50IjoiIiwiU3ViamVjdElEIjoiMTk4NTI0NTM3NDYxMjI1MTMzMyIsIlBob25lIjoiIiwiR3JvdXBJRCI6IjE5ODUyNDUzNzQ2MDM4NTg2MjkiLCJQYWdlTmFtZSI6IiIsIk1haWwiOiJqYWppcmVlbjFAZ21haWwuY29tIiwiQ3JlYXRlVGltZSI6IjIwMjUtMTEtMTIgMTY6MTY6NTAiLCJUb2tlblR5cGUiOjQsImlzcyI6Im1pbmltYXgifQ.XgP47F7rswDWfHvKN9_0rmyQgT3BYucFIen10VTb3ayQ-nF8bjnSKFignv1--bzphtvNnlmdN4C9I6iLqM3oCBSAj-_8-KgqncieSHrF9WQphW-P1PEFnki2kJcZx5rsGUy_58l4QCJ9DNls18XTUljtcAl50zJU6-5XFcOr5JT5tdzHGfvus1ouDL1rnEcmiIrirMqh29YKeLHvLMSol54bSQzefOSt0MuZtrqvm3rUGeo3Eq-nU44-gM13Dt0G66GbcGoxP5H_2XTWJzYqKRRGPtfp3RnVPPZq2FqaT53rgEGyrLzZ9yC9YMOgbsHe7C14B_2WrPkJGaJlevFs9A
MINIMAX_API_KEY=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJHcm91cE5hbWUiOiJKYXplZWwgQWppcmVlbiIsIlVzZXJOYW1lIjoiSmF6ZWVsIEFqaXJlZW4iLCJBY2NvdW50IjoiIiwiU3ViamVjdElEIjoiMTk4NTI0NTM3NDYxMjI1MTMzMyIsIlBob25lIjoiIiwiR3JvdXBJRCI6IjE5ODUyNDUzNzQ2MDM4NTg2MjkiLCJQYWdlTmFtZSI6IiIsIk1haWwiOiJqYWppcmVlbjFAZ21haWwuY29tIiwiQ3JlYXRlVGltZSI6IjIwMjUtMTEtMTIgMTY6MTY6NTAiLCJUb2tlblR5cGUiOjQsImlzcyI6Im1pbmltYXgifQ.XgP47F7rswDWfHvKN9_0rmyQgT3BYucFIen10VTb3ayQ-nF8bjnSKFignv1--bzphtvNnlmdN4C9I6iLqM3oCBSAj-_8-KgqncieSHrF9WQphW-P1PEFnki2kJcZx5rsGUy_58l4QCJ9DNls18XTUljtcAl50zJU6-5XFcOr5JT5tdzHGfvus1ouDL1rnEcmiIrirMqh29YKeLHvLMSol54bSQzefOSt0MuZtrqvm3rUGeo3Eq-nU44-gM13Dt0G66GbcGoxP5H_2XTWJzYqKRRGPtfp3RnVPPZq2FqaT53rgEGyrLzZ9yC9YMOgbsHe7C14B_2WrPkJGaJlevFs9A
MINIMAX_TIMEOUT=5
MINIMAX_RETRY=2

# File upload configuration
KIMI_FILES_MAX_PARALLEL=3
KIMI_FILES_MAX_SIZE_MB=100
KIMI_UPLOAD_TO_SUPABASE=true

# Embedding models
GLM_EMBED_MODEL=embedding-2
KIMI_EMBED_MODEL=text-embedding-3-large

# Max output tokens
GLM_MAX_OUTPUT_TOKENS=8192
KIMI_MAX_OUTPUT_TOKENS=16384

# Language settings
GLM_ACCEPT_LANGUAGE=en-US,en

# Environment
ENVIRONMENT=development

# HTTP client timeout
HTTP_CLIENT_TIMEOUT_SECS=30

# ==============================================================================
# IMPORTANT: These timeouts are validated at startup
# If the daemon fails to start, check these ratios:
# - DAEMON_TIMEOUT_SECS >= 1.5 * TOOL_TIMEOUT_SECS
# - TOOL_TIMEOUT_SECS >= 1.0 * WORKFLOW_TOOL_TIMEOUT_SECS
# ==============================================================================

# ==============================================================================
# SECURITY CONFIGURATION - CRITICAL FOR PRODUCTION
# ==============================================================================
# JWT Authentication - Required for production security
JWT_SECRET_KEY=exai-2025-production-super-secure-jwt-secret-key-minimum-256-bits
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60

# API Authentication
API_KEY_HEADER=X-API-Key
API_SECRET_HEADER=X-API-Secret

# Rate Limiting - Security hardening
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=10

# Session Security
SESSION_TIMEOUT_MINUTES=30
SESSION_MAX_CONCURRENT=5

# WebSocket Security
WS_MAX_CONNECTIONS_PER_IP=10
WS_HEARTBEAT_INTERVAL=30
WS_CLOSE_TIMEOUT=5

# ==============================================================================
# ==============================================================================
# API KEYS - Required for provider functionality
# ==============================================================================
# GLM (z.ai) API Key
GLM_API_KEY=95c42879e5c247beb7d9d30f3ba7b28f.uA2184L5axjigykH

# Kimi (Moonshot) API Key
KIMI_API_KEY=sk-AbCh3IrxmB5Bsx4JV0pnoqb0LajNdkwFvxfwR8KpDXB66qyB

# WebSocket Authentication Token
EXAI_WS_TOKEN=pYf69sHNkOYlYLRTJfMrxCQghO5OJOUFbUxqaxp9Zxo

# ==============================================================================
# SUPABASE CONFIGURATION
# ==============================================================================
SUPABASE_URL=https://mxaazuhlqewmkweewyaz.supabase.co
SUPABASE_ACCESS_TOKEN=sbp_ebdcf0465cfac2f3354e815f35818b7f1cef4625
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14YWF6dWhscWV3bWt3ZWV3eWF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxOTA1MjUsImV4cCI6MjA3Mzc2NjUyNX0.4UfuP40d5L72bp-WAXYTSOF8-P11eR3C5oEcr8dZHVI
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14YWF6dWhscWV3bWt3ZWV3eWF6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1ODE5MDUyNSwiZXhwIjoyMDczNzY2NTI1fQ.HpPi30g4NjpDRGYtc406X_TjIj70OoOYCzQYUltxfgw
KIMI_UPLOAD_TO_SUPABASE=true

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================
# Fix: Use service name instead of localhost
REDIS_URL=redis://default:ExAi2025RedisSecurePass123@exai-redis:6379/0
REDIS_PASSWORD=ExAi2025RedisSecurePass123

# ==============================================================================
# MINIMAX CONFIGURATION
# ==============================================================================
MINIMAX_M2_KEY=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJHcm91cE5hbWUiOiJKYXplZWwgQWppcmVlbiIsIlVzZXJOYW1lIjoiSmF6ZWVsIEFqaXJlZW4iLCJBY2NvdW50IjoiIiwiU3ViamVjdElEIjoiMTk4NTI0NTM3NDYxMjI1MTMzMyIsIlBob25lIjoiIiwiR3JvdXBJRCI6IjE5ODUyNDUzNzQ2MDM4NTg2MjkiLCJQYWdlTmFtZSI6IiIsIk1haWwiOiJqYWppcmVlbjFAZ21haWwuY29tIiwiQ3JlYXRlVGltZSI6IjIwMjUtMTEtMTIgMTY6MTY6NTAiLCJUb2tlblR5cGUiOjQsImlzcyI6Im1pbmltYXgifQ.XgP47F7rswDWfHvKN9_0rmyQgT3BYucFIen10VTb3ayQ-nF8bjnSKFignv1--bzphtvNnlmdN4C9I6iLqM3oCBSAj-_8-KgqncieSHrF9WQphW-P1PEFnki2kJcZx5rsGUy_58l4QCJ9DNls18XTUljtcAl50zJU6-5XFcOr5JT5tdzHGfvus1ouDL1rnEcmiIrirMqh29YKeLHvLMSol54bSQzefOSt0MuZtrqvm3rUGeo3Eq-nU44-gM13Dt0G66GbcGoxP5H_2XTWJzYqKRRGPtfp3RnVPPZq2FqaT53rgEGyrLzZ9yC9YMOgbsHe7C14B_2WrPkJGaJlevFs9A
